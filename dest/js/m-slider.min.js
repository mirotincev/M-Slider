!function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"undefined"!=typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){"use strict";var MSlider=window.MSlider||{};MSlider=function(){function MSlider(element,settings){var dataSettings,_=this;_.defaults={element:$(element),wrap:!1,appendArrows:$(element),appendDots:$(element),arrows:!0,dots:!0,className:"m-slider",prevArrow:'<button type="button" data-role="none" class="m-slider__arrow m-slider__arrow--prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="m-slider__arrow m-slider__arrow--next" aria-label="Next" tabindex="0" role="button">Next</button>',items:1,autoplaySpeed:5e3,autoPlayTimer:null,autoplay:!0,easing:"swing"},_.initials={animating:!1,currentX:0,currentSlide:0,animationTime:500,direction:"next",$wrap:null,$dots:null,$nextArrow:null,$prevArrow:null,paginate:[],slideCount:null,$slideTrack:null,$slides:null,$sliderWidth:0,$slidesLeft:0,$slideWidth:100,swipeLeft:null,touchObject:{},activeSlides:[],transformsEnabled:!1},$.extend(_,_.initials),dataSettings=$(element).data("mslider")||{},_.options=$.extend({},_.defaults,dataSettings,settings),_.$slider=$(element),_.paused=!1,_.$slideWidth=_.$slider.children().eq(0).innerWidth(),_.autoPlay=$.proxy(_.autoPlay,_),_.$slider.trigger("m-slider:init",_),_.init(!0)}return MSlider}(),MSlider.prototype.buildDots=function(){var _=this,widthSlide=_._widthSlide();_.$sliderWidth=_.$slider[0].scrollWidth,1===_.options.items?_.slideCount=_.$slider.children().length:_.slideCount=Math.ceil(_.$sliderWidth/widthSlide);var slide=document.createElement("div"),ul=document.createElement("ul"),newDotes=document.createDocumentFragment();slide.className=[_.options.className,"dots"].join("__"),ul.className=[_.options.className,"dots-list"].join("__");for(var i=1;i<_.slideCount+1;i++){var li=$(document.createElement("li")).append($(document.createElement("span")).text(i));li.addClass([_.options.className,"dot"].join("__")),li.on("click.slider",{slider:_,itemSlide:i-1,action:"goToSlide"},_.changeSlide),$(ul).append(li)}_.$slideDotes=$(ul),newDotes.appendChild(ul),_.$slider.after(newDotes),_.setDotsClasses(_.currentSlide)},MSlider.prototype.buildArrow=function(){var _=this;_.options.arrows===!0&&(_.$prevArrow=$(_.options.prevArrow).addClass([_.options.className,"arrow"].join("__")),_.$nextArrow=$(_.options.nextArrow).addClass([_.options.className,"arrow"].join("__")),$(_.options.appendArrows).prepend(_.$prevArrow).append(_.$nextArrow),_.$prevArrow.on("click.slider",{slider:_,action:"prevSlide"},_.changeSlide),_.$nextArrow.on("click.slider",{slider:_,action:"nextSlide"},_.changeSlide))},MSlider.prototype.chankPage=function(){for(var j,_=this,itemSlide=_.options.element.children().length,sliderCountArray=Array.apply(null,Array(itemSlide)).map(function(_,i){return i}),visibleItem=Math.ceil(itemSlide/_.slideCount),i=0,j=sliderCountArray.length;j>i;i+=visibleItem){var start=i,end=i+visibleItem;i+visibleItem>itemSlide&&(end=itemSlide,start=itemSlide-visibleItem),_.paginate.push(sliderCountArray.slice(start,end))}},MSlider.prototype.unbindArrow=function(){},MSlider.prototype.buildWrap=function(){var _=this,slide=document.createElement("div");slide.className=[_.options.className,"wrap"].join("__"),_.options.element.addClass([_.options.className,"content"].join("__")).wrapAll(slide),_.$wrap=$(_.options.element).parent(slide),_.options.element.children().addClass([_.options.className,"item"].join("__")),_.options.dots&&_.buildDots(),_.options.arrows&&_.buildArrow(),_.chankPage()},MSlider.prototype.unBuildWrap=function(){var _=this;_.options.wrap.unwrap()},MSlider.prototype.changeSlide=function(e,data){e.preventDefault();var _=e.data.slider;_.animating!==!0&&_[e.data.action](e.data)},MSlider.prototype.reinit=function(creation){var _=this;_.$wrap.find(document.getElementsByClassName([_.options.className,"dots-list"].join("__"))).remove(),_.options.dots&&_.buildDots(),_.setSlideClasses(),_.$slider.trigger("m-slider:reinit",_)},MSlider.prototype.init=function(creation){var _=this;_.buildWrap(),_.initializeEvents(),_.setSlideClasses(!0),_.options.autoplay===!0&&_.autoPlay(),_.$slider.trigger("m-slider:initialize",_)},MSlider.prototype.initializeEvents=function(){var x1,y1,shiftX,shiftY,t1,_=this,currentX=0;_.$slider.on("mouseenter",function(event){_.paused=!0,_.autoPlay()}).on("mouseleave",function(event){_.paused=!1,_.autoPlay()}).on("scroll",function(event){}).trigger("scroll"),$(window).on("resize",function(event){_.reinit()}),_.$slider.children().bind({"touchstart.touchSlides":function(e){var eo=e.originalEvent.touches[0];x1=eo.pageX,y1=eo.pageY,_.$slider.children().css("-webkit-transition","none"),t1=Date.now(),_.paused=!0},"touchmove.touchSlides":function(e){var eo=e.originalEvent.touches[0];shiftX=eo.pageX-x1,shiftY=eo.pageY-y1,currentX=_.currentX+1.5*shiftX,e.preventDefault(),_.$slider.children().css({"-webkit-transform":"translate3d("+currentX+"px, 0, 0)"})},"touchend.touchSlides":function(e){_.paused=!1,"undefined"!=typeof shiftX&&(0>shiftX?_.nextSlide():_.prevSlide(),shiftX=void 0)},"touchcancel.touchSlides":function(){},"slideLeft.touchSlides":function(e,customStep){},"slideRight.touchSlides":function(e,customStep){}})},MSlider.prototype.slide=function(currentX){var _=this;_.currentX=currentX,_.animating=!1,_.$slider.children().css({"-webkit-transition":"-webkit-transform "+_.animationTime+"ms ease-out","-webkit-transform":"translate3d("+currentX+"px, 0, 0)"}),_.autoPlay(),_.setDotsClasses(),_.setSlideClasses(),_.animating=!1,_.$slider.trigger("m-slider:change",_)},MSlider.prototype.goToSlide=function(data){var _=this,widthSlide=_._widthSlide(),sLeft=_.$slider.scrollLeft(),nextSlide=data.itemSlide*widthSlide;_.animating=!0,_.direction="next",sLeft>0?_.currentSlide<data.itemSlide?nextSlide-=sLeft:(nextSlide=sLeft-nextSlide,_.direction="prev"):_.currentSlide=data.itemSlide-1,_.currentSlide=data.itemSlide,_.animationTime=200,_.slide(-Math.abs(_.currentSlide*widthSlide))},MSlider.prototype.prevSlide=function(){var _=this,widthSlide=_._widthSlide();_.$slider.scrollLeft();_.direction="prev",_.animating=!0,_.animationTime=500,--_.currentSlide,_.currentSlide<0&&(_.animationTime=200,_.currentSlide=_.slideCount-1),_.$slider.trigger("m-slider:prevSlide",_),_.slide(-Math.abs(_.currentSlide*widthSlide))},MSlider.prototype.nextSlide=function(){var _=this,widthSlide=_._widthSlide();_.$slider.scrollLeft();_.direction="next",_.animating=!0,_.animationTime=500,++_.currentSlide,_.slideCount===_.currentSlide&&(_.animationTime=200,_.currentSlide=0),_.$slider.trigger("m-slider:nextSlide",_),_.slide(-Math.abs(_.currentSlide*widthSlide))},MSlider.prototype._correctWidth=function(nextSlide,direction){var _=this,sLeft=(_._widthSlide(nextSlide),_.$slider.scrollLeft()),correctWidth=sLeft/nextSlide;return correctWidth=correctWidth.toString().split(".")[1],"string"==typeof correctWidth&&("prev"===direction?nextSlide*=Number([0,correctWidth].join(".")):nextSlide-=nextSlide*Number([0,correctWidth].join("."))),Math.abs(nextSlide).toFixed(0)},MSlider.prototype._widthSlide=function(){var widthSlide,_=this;return widthSlide="number"==typeof _.options.items?_.$slideWidth*_.options.items:_.$slider.innerWidth()},MSlider.prototype.setSlideClasses=function(isInit){var _=this;if(_.options.arrows){var classNameActive=[_.options.className,"item--active"].join("__");_.activeSlides=_.paginate[_.currentSlide],_.$slider.children().removeClass(classNameActive),$.each(_.activeSlides,function(index,item){_.$slider.children().eq(item).addClass(classNameActive)})}},MSlider.prototype.setDotsClasses=function(){var _=this;if(_.options.dots){var classNameActive=[_.options.className,"dot--active"].join("__");_.$slideDotes.children().removeClass(classNameActive),_.$slideDotes.children().eq(_.currentSlide).addClass(classNameActive)}},MSlider.prototype.autoPlay=function(){var _=this;_.autoPlayTimer&&clearInterval(_.autoPlayTimer),_.paused!==!0&&(_.autoPlayTimer=setInterval(function(){"next"===_.direction?_.nextSlide():_.prevSlide()},_.options.autoplaySpeed))},$.fn.MSlider=function(){var i,ret,_=this,opt=arguments[0],args=Array.prototype.slice.call(arguments,1),l=_.length;for(i=0;l>i;i++)if("object"==typeof opt||"undefined"==typeof opt?_[i].MSlider=new MSlider(_[i],opt):ret=_[i].mslider[opt].apply(_[i].mslider,args),"undefined"!=typeof ret)return ret;return _}});